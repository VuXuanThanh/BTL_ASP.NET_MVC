@model DoNgoaiChinhHang.Areas.Admin.Models.Order

@{
    ViewBag.Title = "Details";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<style>
    .card-header-text{
        text-align: center;
        margin-top: 20px;
        font-weight: 500;
    }

</style>

<div class="row">
    <div class="col-sm-12 p-0">
        <div class="main-header" style="margin-top: 0px;">
            <h4>Danh sách đơn hàng</h4>
            <ol class="breadcrumb breadcrumb-title breadcrumb-arrow">
                <li class="breadcrumb-item">
                    <a href="index.html">
                        <i class="icofont icofont-home"></i>
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a href="#"> Quản lý sản phẩm</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="#">Danh sách đơn hàng</a>
                </li>
            </ol>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 p0">
        <div class="card" id="printf">
            <div align="center">
                <h3 class="card-header-text">Chi tiết đơn hàng</h3>

            </div>
            <div class="card-block">
                <table class="cus-tb">
                    <tr>
                        <td>Số hóa đơn: <span>@Html.DisplayFor(model => model.OrderID)</span></td>
                        <td>Họ tên: <span>@Html.DisplayFor(model => model.Account.CustomerName)</span></td>
                    </tr>
                    <tr>
                        <td>Điện thoại: <span>@Html.DisplayFor(model => model.Account.Phone)</span></td>
                        <td>Ghi chú: <span>@Html.DisplayFor(model => model.Note)</span></td>
                    </tr>
                    <tr>
                        <td>Ngày đặt: <span>@Html.DisplayFor(model => model.DateOrder)</span></td>
                        <td>Phương thức: <span>@Html.DisplayFor(model => model.PaymentType)</span></td>
                    </tr>
                    <tr>
                        <td>Trạng thái: <span>@Html.DisplayFor(model => model.Status)</span></td>
                        <td>Mã giảm giá: <span>@Html.DisplayFor(model => model.Discount)</span></td>
                    </tr>
                   
                </table>
                

                <div class="col-sm-12">
                    <div class="qr" style="width:200px;height:200px">
                        <img src="@String.Format("data:image/png;base64,{0}", Convert.ToBase64String(ViewBag.QRcode))" style="width:100%;height:100%" />
                    </div>
                    <div align="center">
                        <h4 class="dssp">Danh sách sản phẩm</h4>
                    </div>

                    <table class="table" style="box-shadow: -8px 8px 49px -10px burlywood;">
                        <tr>
                            <th>
                                ProductID
                            </th>
                            <th>
                                ProductName
                            </th>
                            <th>
                                Quantity
                            </th>
                            <th>
                                Price
                            </th>

                        </tr>
                        <tbody id="tbody">
                            @foreach (var item in Model.OrderDetails.Where(s => s.OrderID == Model.OrderID))
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.ProductID)
                                    </td>
                                    <td>
                                        @if (Model.Note == true)
                                        {
                                            @Html.DisplayFor(modelItem => item.Product.ProductName)
                                        }
                                        else
                                        {
                                            var a = "Tên sản phẩm được giữ bí mật";
                                            @a
                                        }

                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Quantity)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Price)
                                    </td>

                                </tr>
                            }
                            <tr>
                                <td colspan="3">Tổng tiền</td>
                                <td>@Html.DisplayFor(model => model.Sum) $</td>
                            </tr>
                        </tbody>

                    </table>
                </div>
                


            </div>
        </div><div>
    <button class="btn btn-block" type="button" onclick="printJS({
    printable: 'printf', type: 'html', css: ['https://localhost:44378/assets/Admin/plugins/bootstrap/css/bootstrap.min.css',
            'https://localhost:44378/assets/Admin/custom/cus.css']
    })">
        In hóa đơn
    </button>
    <button class="btn btn-block" type="button" onclick="{
        location.href = '/Admin/Orders/Index'}">
        Quay lại
    </button>

</div>

    </div>
</div>
